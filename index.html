

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>libostree - ostreedev/ostree</title>

    
  

  <link rel="shortcut icon" href="/ostree/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/ostree/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/ostree/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/ostree/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>libostree | ostreedev/ostree</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="libostree" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ostree documentation" />
<meta property="og:description" content="ostree documentation" />
<link rel="canonical" href="https://ostreedev.github.io/ostree/" />
<meta property="og:url" content="https://ostreedev.github.io/ostree/" />
<meta property="og:site_name" content="ostreedev/ostree" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="libostree" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"ostree documentation","headline":"libostree","name":"ostreedev/ostree","url":"https://ostreedev.github.io/ostree/"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="https://ostreedev.github.io/ostree/" class="site-title lh-tight">
  ostreedev/ostree

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item active"><a href="https://ostreedev.github.io/ostree/" class="nav-list-link active">libostree</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/introduction/" class="nav-list-link">OSTree Overview</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/repo/" class="nav-list-link">Anatomy of an OSTree repository</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/deployment/" class="nav-list-link">Deployments</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/atomic-upgrades/" class="nav-list-link">Atomic Upgrades</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/adapting-existing/" class="nav-list-link">Adapting existing mainstream distributions</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/formats/" class="nav-list-link">OSTree data formats</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/buildsystem-and-repos/" class="nav-list-link">Writing a buildsystem and managing repositories</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/repository-management/" class="nav-list-link">Managing content in OSTree repositories</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/related-projects/" class="nav-list-link">Related Projects</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/ima/" class="nav-list-link">Using Linux IMA with OSTree</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/CONTRIBUTING/" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/contributing-tutorial/" class="nav-list-link">OSTree Contributing Tutorial</a></li><li class="nav-list-item"><a href="https://ostreedev.github.io/ostree/README-historical/" class="nav-list-link">Historical OSTree README</a></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search ostreedev/ostree" aria-label="Search ostreedev/ostree" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="https://github.com/ostreedev/ostree" class="site-button"
                  
                >
                  OSTree on GitHub
                </a>
              </li>
            
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
      <div id="main-content" class="main-content" role="main">
        
          <h1 class="no_toc" id="libostree">
        
        
          <a href="#libostree" class="anchor-heading" aria-labelledby="libostree"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> libostree
        
        
      </h1>
    

<ol id="markdown-toc">
  <li><a href="#operating-systems-and-distributions-using-ostree" id="markdown-toc-operating-systems-and-distributions-using-ostree">Operating systems and distributions using OSTree</a></li>
  <li><a href="#distribution-build-tools" id="markdown-toc-distribution-build-tools">Distribution build tools</a></li>
  <li><a href="#projects-linking-to-libostree" id="markdown-toc-projects-linking-to-libostree">Projects linking to libostree</a></li>
  <li><a href="#language-bindings" id="markdown-toc-language-bindings">Language bindings</a></li>
  <li><a href="#building" id="markdown-toc-building">Building</a></li>
  <li><a href="#api-reference" id="markdown-toc-api-reference">API Reference</a></li>
  <li><a href="#manual-pages" id="markdown-toc-manual-pages">Manual Pages</a></li>
  <li><a href="#contributing" id="markdown-toc-contributing">Contributing</a></li>
  <li><a href="#licensing" id="markdown-toc-licensing">Licensing</a></li>
</ol>

<p>This project is now known as “libostree”, though it is still appropriate to use
the previous name: “OSTree” (or “ostree”). The focus is on projects which use
libostree’s shared library, rather than users directly invoking the command line
tools (except for build systems). However, in most of the rest of the
documentation, we will use the term “OSTree”, since it’s slightly shorter, and
changing all documentation at once is impractical. We expect to transition to
the new name over time.</p>

<p>As implied above, libostree is both a shared library and suite of command line
tools that combines a “git-like” model for committing and downloading bootable
filesystem trees, along with a layer for deploying them and managing the
bootloader configuration.</p>

<p>The core OSTree model is like git in that it checksums individual files and has
a content-addressed-object store. It’s unlike git in that it “checks out” the
files via hardlinks, and they thus need to be immutable to prevent corruption.
Therefore, another way to think of OSTree is that it’s just a more polished
version of
<a href="http://linux-vserver.org/index.php?title=util-vserver:Vhashify&amp;oldid=2285">Linux VServer hardlinks</a>.</p>

<p><strong>Features:</strong></p>

<ul>
  <li>Transactional upgrades and rollback for the system</li>
  <li>Replicating content incrementally over HTTP via GPG signatures and “pinned TLS” support</li>
  <li>Support for parallel installing more than just 2 bootable roots</li>
  <li>Binary history on the server side (and client)</li>
  <li>Introspectable shared library API for build and deployment systems</li>
  <li>Flexible support for multiple branches and repositories, supporting
projects like <a href="https://github.com/flatpak/flatpak">flatpak</a> which
use libostree for applications, rather than hosts.</li>
</ul>
      <h2 id="operating-systems-and-distributions-using-ostree">
        
        
          <a href="#operating-systems-and-distributions-using-ostree" class="anchor-heading" aria-labelledby="operating-systems-and-distributions-using-ostree"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Operating systems and distributions using OSTree
        
        
      </h2>
    

<p><a href="https://endlessos.com/">Endless OS</a> uses libostree for their host system as
well as flatpak. See
their <a href="https://github.com/endlessm/eos-updater">eos-updater</a>
and <a href="https://github.com/dbnicholson/deb-ostree-builder">deb-ostree-builder</a>
projects.</p>

<p>Fedora derivatives use rpm-ostree (noted below); there are 4 variants using OSTree:</p>

<ul>
  <li><a href="https://getfedora.org/en/coreos/">Fedora CoreOS</a></li>
  <li><a href="https://silverblue.fedoraproject.org/">Fedora Silverblue</a></li>
  <li><a href="https://kinoite.fedoraproject.org/">Fedora Kinoite</a></li>
  <li><a href="https://iot.fedoraproject.org/">Fedora IoT</a></li>
</ul>

<p>Red Hat Enterprise Linux CoreOS is a derivative of Fedora CoreOS, used in <a href="https://try.openshift.com/">OpenShift 4</a>.
The <a href="https://github.com/openshift/machine-config-operator/blob/master/docs/OSUpgrades.md">machine-config-operator</a>
manages upgrades.  RHEL CoreOS is also the successor to RHEL Atomic Host, which
uses rpm-ostree as well.</p>

<p><a href="https://wiki.gnome.org/Projects/GnomeContinuous">GNOME Continuous</a> is
where OSTree was born - as a high performance continuous delivery/testing
system for GNOME.</p>

<p><a href="https://liri.io/download/silverblue/">Liri OS</a> has the option to install
their distribution using ostree.</p>

<p><a href="https://developer.toradex.com/knowledge-base/torizoncore-overview">TorizonCore</a>
uses libostree and Aktualizr as the base for OTA updates from compatible
platforms, including <a href="https://developer.toradex.com/knowledge-base/torizon-update-system">Torizon OTA</a>.</p>
      <h2 id="distribution-build-tools">
        
        
          <a href="#distribution-build-tools" class="anchor-heading" aria-labelledby="distribution-build-tools"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Distribution build tools
        
        
      </h2>
    

<p><a href="https://github.com/advancedtelematic/meta-updater">meta-updater</a> is
a layer available for <a href="http://www.openembedded.org/wiki/Main_Page">OpenEmbedded</a>
systems.</p>

<p><a href="http://doc.qt.io/QtOTA/">QtOTA</a> is Qt’s over-the-air update framework
which uses libostree.</p>

<p>The <a href="https://gitlab.com/BuildStream/buildstream">BuildStream</a> build and
integration tool supports importing and exporting from libostree repos.</p>

<p>Fedora <a href="https://github.com/coreos/coreos-assembler">coreos-assembler</a> is
the build tool used to generate Fedora CoreOS derivatives.</p>
      <h2 id="projects-linking-to-libostree">
        
        
          <a href="#projects-linking-to-libostree" class="anchor-heading" aria-labelledby="projects-linking-to-libostree"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Projects linking to libostree
        
        
      </h2>
    

<p><a href="https://github.com/projectatomic/rpm-ostree">rpm-ostree</a> is used by the
Fedora-derived operating systems listed above.  It is a full hybrid
image/package system.  By default it uses libostree to atomically replicate a base OS
(all dependency resolution is done on the server), but it supports “package layering”, where
additional RPMs can be layered on top of the base.  This brings a “best of both worlds””
model for image and package systems.</p>

<p><a href="https://github.com/endlessm/eos-updater">eos-updater</a> is a daemon that implements updates
on EndlessOS.</p>

<p><a href="https://github.com/flatpak/flatpak">flatpak</a> uses libostree for desktop
application containers. Unlike most of the other systems here, flatpak does not
use the “libostree host system” aspects (e.g. bootloader management), just the
“git-like hardlink dedup”. For example, flatpak supports a per-user OSTree
repository.</p>
      <h2 id="language-bindings">
        
        
          <a href="#language-bindings" class="anchor-heading" aria-labelledby="language-bindings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Language bindings
        
        
      </h2>
    

<p>libostree is accessible via <a href="https://gi.readthedocs.io/en/latest/">GObject Introspection</a>;
any language which has implemented the GI binding model should work.
For example, Both <a href="https://pygobject.readthedocs.io/en/latest/">pygobject</a>
and <a href="https://gitlab.gnome.org/GNOME/gjs">gjs</a> are known to work
and further are actually used in libostree’s test suite today.</p>

<p>Some bindings take the approach of using GI as a lower level and
write higher level manual bindings on top; this is more common
for statically compiled languages.  Here’s a list of such bindings:</p>

<ul>
  <li><a href="https://github.com/ostreedev/ostree-go/">ostree-go</a></li>
  <li><a href="https://gitlab.com/fkrull/ostree-rs/">ostree-rs</a></li>
</ul>
      <h2 id="building">
        
        
          <a href="#building" class="anchor-heading" aria-labelledby="building"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building
        
        
      </h2>
    

<p>Releases are available as GPG signed git tags, and most recent
versions support extended validation using
<a href="https://github.com/cgwalters/git-evtag">git-evtag</a>.</p>

<p>However, in order to build from a git clone, you must update the
submodules.  If you’re packaging OSTree and want a tarball, I
recommend using a “recursive git archive” script.  There are several
available online;
<a href="https://github.com/ostreedev/ostree/blob/main/packaging/Makefile.dist-packaging#L11">this code</a>
in OSTree is an example.</p>

<p>Once you have a git clone or recursive archive, building is the
same as almost every autotools project:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule update --init
env NOCONFIGURE=1 ./autogen.sh
./configure --prefix=...
make
make install DESTDIR=/path/to/dest
</code></pre></div></div>
      <h2 id="api-reference">
        
        
          <a href="#api-reference" class="anchor-heading" aria-labelledby="api-reference"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API Reference
        
        
      </h2>
    

<p>The libostree API documentation is available in <a href="reference/">Reference</a>.</p>
      <h2 id="manual-pages">
        
        
          <a href="#manual-pages" class="anchor-heading" aria-labelledby="manual-pages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Manual Pages
        
        
      </h2>
    

<p>The ostree manual pages are available in <a href="man/">Manual</a>.</p>
      <h2 id="contributing">
        
        
          <a href="#contributing" class="anchor-heading" aria-labelledby="contributing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Contributing
        
        
      </h2>
    

<p>See <a href="/ostree/CONTRIBUTING/">Contributing</a>.</p>
      <h2 id="licensing">
        
        
          <a href="#licensing" class="anchor-heading" aria-labelledby="licensing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Licensing
        
        
      </h2>
    

<p>The licensing for the <em>code</em> of libostree can be canonically found in the individual files;
and the overall status in the <a href="https://github.com/ostreedev/ostree/blob/main/COPYING">COPYING</a>
file in the source.  Currently, that’s LGPLv2+.  This also covers the man pages and API docs.</p>

<p>The license for the manual documentation in the <code class="language-plaintext highlighter-rouge">doc/</code> directory is:
<code class="language-plaintext highlighter-rouge">SPDX-License-Identifier: (CC-BY-SA-3.0 OR GFDL-1.3-or-later)</code>
This is intended to allow use by Wikipedia and other projects.</p>

<p>In general, files should have a <code class="language-plaintext highlighter-rouge">SPDX-License-Identifier</code> and that is canonical.</p>

        

        

        
        
          <hr>
          <footer>
            

            <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; <a href="https://www.redhat.com">Red Hat, Inc.</a> and <a href="https://github.com/ostreedev">others</a>.</p>

            
              <div class="d-flex mt-2">
                
                
                  <p class="text-small text-grey-dk-000 mb-0">
                    <a href="https://github.com/ostreedev/ostree/tree/main/docs/index.md" id="edit-this-page">Edit this page on GitHub</a>
                  </p>
                
              </div>
            
          </footer>
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>

